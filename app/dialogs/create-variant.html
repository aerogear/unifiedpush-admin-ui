<form name="form" class="modal-content ups-modal-content ups-add-variable">
  <div class="modal-header">
    <button type="button" class="close" aria-hidden="true" ng-click="dismiss()">
      <span class="pficon pficon-close"></span>
    </button>
    <h4 class="modal-title" id="myModalLabel">{{ isNew ? 'Add' : 'Edit' }} Variant</h4>
  </div>
  <div class="modal-body form-horizontal">

    <div class="form-group" ng-if="isNew">
      <label class="col-sm-3 control-label" for="textInput-modal-markup">Name</label>
      <div class="col-sm-9">
        <input type="text" id="textInput-modal-markup" class="form-control" placeholder="eg. Demo" ng-model="variant.name" required="required" pf-focused="true">
      </div>
    </div>

    <div class="form-group" ng-if="isNew && allowCreate('android')">
      <label class="col-sm-3 control-label" for="optionAndroid">Choose a platform</label>
      <div class="col-sm-9">
        <div class="radio">
          <label>
            <input type="radio" name="variantType" id="optionAndroid" value="android" ng-model="variant.type" ng-required="true">
                <span class="ups-has-icon ups-variant-android">
                  <strong>Android</strong><br>
                  using Firebase Cloud Messaging
                </span>
          </label>
        </div>
      </div>
    </div>


    <div class="form-group" ng-if="isNew && allowCreate('ios')">
      <label class="col-sm-3 control-label sr-only" for="optionIos">iOS</label>
      <div class="col-sm-9">
        <div class="radio">
          <label>
            <input type="radio" name="variantType" id="optionIos" value="ios" ng-model="variant.type" ng-required="true">
                <span class="ups-has-icon ups-variant-ios">
                  <strong>iOS</strong><br>
                  using Apple Push Network
                </span>
          </label>
        </div>
      </div>
    </div>


    <div class="form-group" ng-if="isNew && allowCreate('windows_wns')">
      <label class="col-sm-3 control-label sr-only" for="optionWindowsWns">Windows</label>
      <div class="col-sm-9">
        <div class="radio">
          <label>
            <input type="radio" name="variantType" id="optionWindowsWns" value="windows_wns" ng-model="variant.type" ng-required="true">
                <span class="ups-has-icon ups-variant-windows">
                  <strong>Windows/WNS</strong><br>
                  using Windows Push Notification Services (WNS)
                </span>
          </label>
        </div>
      </div>
    </div>

    <div class="form-group" ng-if="isNew && allowCreate('webPush')">
      <label class="col-sm-3 control-label sr-only" for="optionsWebPush">WebPush</label>
      <div class="col-sm-9">
        <div class="radio">
          <label>
            <input type="radio" name="variantType" id="optionsWebPush" value="webPush" ng-model="variant.type" ng-required="true">
                <span class="ups-has-icon ups-variant-firefox">
                  <strong>WebPush (experimental)</strong><br>
                  using Mozilla Push Service or Firebase Cloud Messaging
                </span>
          </label>
        </div>
      </div>
    </div>

    <div ng-show="variant.type">
      <div ng-show="variant.type == 'android'">
        <div class="form-group">
          <label class="col-sm-3 control-label" for="fcmApiKey">Push Network</label>
          <div class="col-sm-7">Server Key<br>
            <input type="text" placeholder="e.g. AIza5a448c2f31700a466fbc9d33d33942b043a27596" id="fcmApiKey" class="form-control" ng-model="variant.googleKey" ng-required="variant.type == 'android'">
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label" for="fcmProjectNumber"></label>
          <div class="col-sm-7">
            Sender ID<br>
            <input type="text" placeholder="e.g. 42" id="fcmProjectNumber" class="form-control" ng-model="variant.projectNumber">
          </div>
        </div>
      </div>

      <div ng-show="variant.type == 'ios'">
        <div class="form-group">
          <label class="col-sm-3 control-label">Push Network</label>
          <div class="col-sm-7">
            <p><em>Apple Push Notification Service</em> certificate:</p>
            <strong><input type="file" ups-files="variant.certificates" /></strong>
            <div class="form-horizontal">
              <div class="form-group">
                <div class="row">
                  <br><label class="col-sm-3 control-label">Type</label>
                  <div class="col-sm-9">
                    <div class="row">
                      <div class="radio">
                        <label>
                          <input type="radio" name="iosType" id="iosType1" ng-model="variant.production" ng-value="true" ng-required="variant.type == 'ios'">
                          Production
                        </label>
                      </div>
                    </div>
                    <div class="row">
                      <div class="radio">
                        <label>
                          <input type="radio" name="iosType" id="iosType2" ng-model="variant.production" ng-value="false" ng-required="variant.type == 'ios'">
                          Development
                        </label>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-3 control-label" for="iosPassphrase">Passphrase</label>
                <div class="col-sm-9">
                  <input type="password" id="iosPassphrase" class="form-control" ng-model="variant.passphrase" ng-disabled="!isNew && variant.certificates.length == 0">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div ng-show="variant.type == 'windows_wns'">
        <div class="form-group">
          <label class="col-sm-3 control-label" for="sid">Push Network</label>
          <div class="col-sm-7"><em>Package SID</em><br>
            <input type="text" placeholder="ms-app://s-1-15-2-3183935804-3637592178" id="sid" class="form-control" ng-model="variant.sid" ng-required="variant.protocolType == 'wns'">
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label" for="clientSecret"></label>
          <div class="col-sm-7">Client Secret<br>
            <input type="text" placeholder="e.g. 42" id="clientSecret" class="form-control" ng-model="variant.clientSecret" ng-required="variant.protocolType == 'wns'">
          </div>
        </div>
      </div>

      <div ng-show="variant.type == 'webPush'">
        <div class="form-group">
          <label class="col-sm-3 control-label" for="fcmServerKey">Push Network</label>
          <div class="col-sm-7">FCM Server Key<br>
            <input type="text" placeholder="e.g. AIza5a448c2f31700a466fbc9d33d33942b043a27596" id="fcmServerKey" class="form-control" ng-model="variant.fcmServerKey" ng-required="variant.type == 'webPush'">
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label" for="fcmSenderID"></label>
          <div class="col-sm-7">FCM Sender ID<br>
            <input type="text" placeholder="e.g. 42" id="fcmSenderID" class="form-control" ng-model="variant.fcmSenderID">
          </div>
        </div>
      </div>

    </div>

  </div>
  <div class="modal-footer">
    <button ng-click="dismiss()" type="button" class="btn btn-default">Cancel</button>
    <button ng-click="confirm()" class="btn btn-primary" ng-disabled="form.$invalid || !validateFileInputs()">{{ isNew ? 'Create' : 'Save' }}</button>
  </div>
</form>
